{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/sachi/Desktop/Mobile App/application/screens/Search.js\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport AppLoading from \"../components/AppLoading\";\nimport { searchApi } from \"../config/DataApp\";\nimport Heading from \"../components/Heading\";\nimport { map, size } from \"lodash\";\nimport Styles from \"../config/Styles\";\nimport Strings from \"../config/Strings\";\nimport ColorsApp from \"../config/ColorsApp\";\nimport { Text, List, Avatar, Searchbar } from 'react-native-paper';\nimport LoadMoreButton from \"../components/LoadMoreButton\";\nimport EmptyResults from \"../components/EmptyResults\";\nexport default function Search(props) {\n  var _this = this;\n\n  var route = props.route;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      query = _useState2[0],\n      setQuery = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      results = _useState4[0],\n      setResults = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      page = _useState6[0],\n      setPage = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showButton = _useState8[0],\n      setshowButton = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isLoaded = _useState10[0],\n      setIsLoaded = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      total = _useState12[0],\n      setTotal = _useState12[1];\n\n  var onChangeScreen = function onChangeScreen(id, title) {\n    props.navigation.navigate('recipe', {\n      id: id,\n      title: title\n    });\n  };\n\n  useEffect(function () {\n    searchRequest();\n    setIsLoaded(true);\n  }, [query]);\n\n  var searchRequest = function searchRequest() {\n    if (size(query) >= 3) {\n      searchApi(query, page).then(function (response) {\n        setResults(response);\n        setTotal(response.length);\n      });\n    }\n  };\n\n  var loadMore = function loadMore() {\n    setLoading(true);\n    setPage(page + 1);\n    searchApi(query, page).then(function (response) {\n      if (!results) {\n        setResults(response);\n        setLoading(false);\n      } else {\n        setResults([].concat(_toConsumableArray(results), _toConsumableArray(response)));\n        setLoading(false);\n      }\n\n      if (response.length <= 0) {\n        setshowButton(false);\n      }\n\n      setIsLoaded(true);\n    });\n  };\n\n  var renderButton = function renderButton() {\n    return React.createElement(LoadMoreButton, {\n      Indicator: loading,\n      showButton: showButton,\n      Items: items,\n      Num: 10,\n      Click: function Click() {\n        return loadMore();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    });\n  };\n\n  if (isLoaded) {\n    return React.createElement(View, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }\n    }, React.createElement(Searchbar, {\n      placeholder: Strings.ST56,\n      autoCorrect: false,\n      autoCapitalize: \"none\",\n      onIconPress: function onIconPress() {\n        return searchRequest();\n      },\n      onChangeText: function onChangeText(e) {\n        return setQuery(e);\n      },\n      style: Styles.SearchInput,\n      inputStyle: Styles.SearchInputStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }\n    }), React.createElement(ScrollView, {\n      showsVerticalScrollIndicator: false,\n      showsHorizontalScrollIndicator: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 5\n      }\n    }, React.createElement(View, {\n      style: Styles.SearchScreen,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 5\n      }\n    }, map(results, function (item, i) {\n      return React.createElement(List.Item, {\n        key: i,\n        title: item.title,\n        titleStyle: {\n          fontWeight: 'bold',\n          marginBottom: 3\n        },\n        onPress: function onPress() {\n          return onChangeScreen(item.id, item.title);\n        },\n        activeOpacity: 1,\n        titleNumberOfLines: 2,\n        underlayColor: \"#ffffff\",\n        rippleColor: \"rgba(0, 0, 0, .01)\",\n        left: function left(props) {\n          return React.createElement(Avatar.Image, {\n            size: 80,\n            style: {\n              marginRight: 10\n            },\n            source: {\n              uri: item.image\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 24\n            }\n          });\n        },\n        right: function right(props) {\n          return React.createElement(List.Icon, _extends({}, props, {\n            icon: \"chevron-right\",\n            style: {\n              alignSelf: 'center',\n              opacity: 0.3\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }\n      });\n    }), results.length <= 0 && size(query) >= 3 ? React.createElement(View, {\n      style: {\n        marginTop: 50\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 50\n      }\n    }, React.createElement(EmptyResults, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 80\n      }\n    })) : null), React.createElement(View, {\n      style: {\n        height: 80\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 5\n      }\n    })));\n  } else {\n    return React.createElement(AppLoading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 6\n      }\n    });\n  }\n}","map":{"version":3,"sources":["/Users/sachi/Desktop/Mobile App/application/screens/Search.js"],"names":["React","useState","useEffect","AppLoading","searchApi","Heading","map","size","Styles","Strings","ColorsApp","Text","List","Avatar","Searchbar","LoadMoreButton","EmptyResults","Search","props","route","query","setQuery","results","setResults","page","setPage","showButton","setshowButton","isLoaded","setIsLoaded","total","setTotal","onChangeScreen","id","title","navigation","navigate","searchRequest","then","response","length","loadMore","setLoading","renderButton","loading","items","ST56","e","SearchInput","SearchInputStyle","SearchScreen","item","i","fontWeight","marginBottom","marginRight","uri","image","alignSelf","opacity","marginTop","height"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;;;;;AAEA,OAAOC,UAAP;AACA,SAAQC,SAAR;AACA,OAAOC,OAAP;AACA,SAASC,GAAT,EAAcC,IAAd,QAA0B,QAA1B;AACA,OAAOC,MAAP;AACA,OAAOC,OAAP;AACA,OAAOC,SAAP;AACA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,MAArB,EAA6BC,SAA7B,QAA8C,oBAA9C;AACA,OAAOC,cAAP;AACA,OAAOC,YAAP;AAEA,eAAe,SAASC,MAAT,CAAgBC,KAAhB,EAAuB;AAAA;;AAEpC,MAAQC,KAAR,GAAkBD,KAAlB,CAAQC,KAAR;;AACA,kBAA0BlB,QAAQ,CAAC,EAAD,CAAlC;AAAA;AAAA,MAAOmB,KAAP;AAAA,MAAcC,QAAd;;AACA,mBAA8BpB,QAAQ,CAAC,EAAD,CAAtC;AAAA;AAAA,MAAOqB,OAAP;AAAA,MAAgBC,UAAhB;;AACA,mBAAwBtB,QAAQ,CAAC,CAAD,CAAhC;AAAA;AAAA,MAAOuB,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAAoCxB,QAAQ,CAAC,IAAD,CAA5C;AAAA;AAAA,MAAOyB,UAAP;AAAA,MAAmBC,aAAnB;;AACA,mBAAgC1B,QAAQ,CAAC,KAAD,CAAxC;AAAA;AAAA,MAAO2B,QAAP;AAAA,MAAiBC,WAAjB;;AACA,oBAA0B5B,QAAQ,CAAC,EAAD,CAAlC;AAAA;AAAA,MAAO6B,KAAP;AAAA,MAAcC,QAAd;;AAEA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,EAAD,EAAKC,KAAL,EAAe;AACpChB,IAAAA,KAAK,CAACiB,UAAN,CAAiBC,QAAjB,CAA0B,QAA1B,EAAoC;AAACH,MAAAA,EAAE,EAAFA,EAAD;AAAKC,MAAAA,KAAK,EAALA;AAAL,KAApC;AACD,GAFD;;AAIAhC,EAAAA,SAAS,CAAC,YAAM;AAEZmC,IAAAA,aAAa;AACbR,IAAAA,WAAW,CAAC,IAAD,CAAX;AAEH,GALQ,EAKN,CAACT,KAAD,CALM,CAAT;;AAOA,MAAMiB,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAExB,QAAI9B,IAAI,CAACa,KAAD,CAAJ,IAAe,CAAnB,EAAsB;AAEhBhB,MAAAA,SAAS,CAACgB,KAAD,EAAQI,IAAR,CAAT,CAAuBc,IAAvB,CAA4B,UAACC,QAAD,EAAc;AACxChB,QAAAA,UAAU,CAACgB,QAAD,CAAV;AACAR,QAAAA,QAAQ,CAACQ,QAAQ,CAACC,MAAV,CAAR;AACD,OAHD;AAIL;AAEJ,GAVD;;AAYA,MAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAErBC,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAjB,IAAAA,OAAO,CAACD,IAAI,GAAC,CAAN,CAAP;AAEApB,IAAAA,SAAS,CAACgB,KAAD,EAAQI,IAAR,CAAT,CAAuBc,IAAvB,CAA4B,UAACC,QAAD,EAAc;AAExC,UAAI,CAACjB,OAAL,EAAc;AACZC,QAAAA,UAAU,CAACgB,QAAD,CAAV;AACAG,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OAHD,MAGK;AACHnB,QAAAA,UAAU,8BAAKD,OAAL,sBAAiBiB,QAAjB,GAAV;AACAG,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;;AAED,UAAIH,QAAQ,CAACC,MAAT,IAAmB,CAAvB,EAA0B;AACxBb,QAAAA,aAAa,CAAC,KAAD,CAAb;AACD;;AAEDE,MAAAA,WAAW,CAAC,IAAD,CAAX;AAED,KAhBD;AAkBD,GAvBD;;AAyBA,MAAMc,YAAY,GAAG,SAAfA,YAAe,GAAM;AAEzB,WACE,oBAAC,cAAD;AAAgB,MAAA,SAAS,EAAEC,OAA3B;AAAoC,MAAA,UAAU,EAAElB,UAAhD;AAA4D,MAAA,KAAK,EAAEmB,KAAnE;AAA0E,MAAA,GAAG,EAAE,EAA/E;AAAmF,MAAA,KAAK,EAAE;AAAA,eAAMJ,QAAQ,EAAd;AAAA,OAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAGD,GALD;;AAOA,MAAIb,QAAJ,EAAc;AAEV,WAEF,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA,oBAAC,SAAD;AACA,MAAA,WAAW,EAAEnB,OAAO,CAACqC,IADrB;AAEA,MAAA,WAAW,EAAE,KAFb;AAGA,MAAA,cAAc,EAAC,MAHf;AAIA,MAAA,WAAW,EAAE;AAAA,eAAMT,aAAa,EAAnB;AAAA,OAJb;AAKA,MAAA,YAAY,EAAE,sBAACU,CAAD;AAAA,eAAO1B,QAAQ,CAAC0B,CAAD,CAAf;AAAA,OALd;AAMA,MAAA,KAAK,EAAEvC,MAAM,CAACwC,WANd;AAOA,MAAA,UAAU,EAAExC,MAAM,CAACyC,gBAPnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,EAWA,oBAAC,UAAD;AAAY,MAAA,4BAA4B,EAAE,KAA1C;AAAiD,MAAA,8BAA8B,EAAE,KAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEzC,MAAM,CAAC0C,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEK5C,GAAG,CAACgB,OAAD,EAAU,UAAC6B,IAAD,EAAOC,CAAP;AAAA,aAEd,oBAAC,IAAD,CAAM,IAAN;AACA,QAAA,GAAG,EAAEA,CADL;AAEA,QAAA,KAAK,EAAED,IAAI,CAACjB,KAFZ;AAGA,QAAA,UAAU,EAAE;AAACmB,UAAAA,UAAU,EAAE,MAAb;AAAqBC,UAAAA,YAAY,EAAE;AAAnC,SAHZ;AAIA,QAAA,OAAO,EAAE;AAAA,iBAAMtB,cAAc,CAACmB,IAAI,CAAClB,EAAN,EAAUkB,IAAI,CAACjB,KAAf,CAApB;AAAA,SAJT;AAKA,QAAA,aAAa,EAAE,CALf;AAMA,QAAA,kBAAkB,EAAE,CANpB;AAOA,QAAA,aAAa,EAAC,SAPd;AAQA,QAAA,WAAW,EAAC,oBARZ;AASA,QAAA,IAAI,EAAE,cAAAhB,KAAK;AAAA,iBAAI,oBAAC,MAAD,CAAQ,KAAR;AAAc,YAAA,IAAI,EAAE,EAApB;AAAwB,YAAA,KAAK,EAAE;AAACqC,cAAAA,WAAW,EAAE;AAAd,aAA/B;AAAkD,YAAA,MAAM,EAAE;AAACC,cAAAA,GAAG,EAAEL,IAAI,CAACM;AAAX,aAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAJ;AAAA,SATX;AAUA,QAAA,KAAK,EAAE,eAAAvC,KAAK;AAAA,iBAAI,oBAAC,IAAD,CAAM,IAAN,eAAeA,KAAf;AAAsB,YAAA,IAAI,EAAC,eAA3B;AAA2C,YAAA,KAAK,EAAE;AAACwC,cAAAA,SAAS,EAAE,QAAZ;AAAsBC,cAAAA,OAAO,EAAE;AAA/B,aAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAJ;AAAA,SAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFc;AAAA,KAAV,CAFR,EAoBGrC,OAAO,CAACkB,MAAR,IAAkB,CAAlB,IAAuBjC,IAAI,CAACa,KAAD,CAAJ,IAAe,CAAtC,GAA0C,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACwC,QAAAA,SAAS,EAAE;AAAZ,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8B,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA9B,CAA1C,GAAiG,IApBpG,CAFA,EA2BA,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,MAAM,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3BA,CAXA,CAFE;AAgDH,GAlDD,MAkDK;AACJ,WACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAGD;AAED","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, ScrollView, StyleSheet, ImageBackground, TouchableOpacity, SafeAreaView } from 'react-native';\nimport AppLoading from '../components/AppLoading';\nimport {searchApi} from \"../config/DataApp\";\nimport Heading from '../components/Heading';\nimport { map, size } from \"lodash\";\nimport Styles from '../config/Styles';\nimport Strings from '../config/Strings';\nimport ColorsApp from '../config/ColorsApp';\nimport { Text, List, Avatar, Searchbar } from 'react-native-paper';\nimport LoadMoreButton from '../components/LoadMoreButton';\nimport EmptyResults from '../components/EmptyResults';\n\nexport default function Search(props) {\n\n  const { route } = props;\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [page, setPage] = useState(1);\n  const [showButton, setshowButton] = useState(true);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [total, setTotal] = useState('');\n\n  const onChangeScreen = (id, title) => {\n    props.navigation.navigate('recipe', {id, title});\n  };\n\n  useEffect(() => {\n\n      searchRequest();\n      setIsLoaded(true);\n\n  }, [query]);\n\n  const searchRequest = () => {\n\n      if (size(query) >= 3) {\n\n            searchApi(query, page).then((response) => {\n              setResults(response);\n              setTotal(response.length);\n            });\n      }\n\n  }\n\n  const loadMore = () => {\n\n    setLoading(true);\n    setPage(page+1);\n\n    searchApi(query, page).then((response) => {\n\n      if (!results) {\n        setResults(response);\n        setLoading(false);\n      }else{\n        setResults([...results, ...response]);\n        setLoading(false);\n      }\n\n      if (response.length <= 0) {\n        setshowButton(false);\n      }\n\n      setIsLoaded(true);\n\n    });\n\n  };\n\n  const renderButton = () => {\n\n    return (\n      <LoadMoreButton Indicator={loading} showButton={showButton} Items={items} Num={10} Click={() => loadMore()}/>\n      )\n  }\n\n  if (isLoaded) {\n\n      return(\n\n    <View>\n\n    <Searchbar\n    placeholder={Strings.ST56}\n    autoCorrect={false}\n    autoCapitalize='none'\n    onIconPress={() => searchRequest()}\n    onChangeText={(e) => setQuery(e)}\n    style={Styles.SearchInput}\n    inputStyle={Styles.SearchInputStyle} />\n    \n    <ScrollView showsVerticalScrollIndicator={false} showsHorizontalScrollIndicator={false}>\n    \n    <View style={Styles.SearchScreen}>\n\n        {map(results, (item, i) => (\n\n        <List.Item\n        key={i}\n        title={item.title}\n        titleStyle={{fontWeight: 'bold', marginBottom: 3}}\n        onPress={() => onChangeScreen(item.id, item.title)}\n        activeOpacity={1}\n        titleNumberOfLines={2}\n        underlayColor=\"#ffffff\"\n        rippleColor=\"rgba(0, 0, 0, .01)\"\n        left={props => <Avatar.Image size={80} style={{marginRight: 10}} source={{uri: item.image}} />}\n        right={props => <List.Icon {...props} icon=\"chevron-right\" style={{alignSelf: 'center', opacity: 0.3}} />}\n      />\n\n          ))}\n\n\n      {results.length <= 0 && size(query) >= 3 ? <View style={{marginTop: 50}}><EmptyResults/></View> : null }\n  \n\n    </View>\n\n    <View style={{height: 80}}></View>\n\n    </ScrollView>\n\n    </View>\n\n        );\n\n  }else{\n   return (\n     <AppLoading/>\n     );\n }\n \n}\n\n"]},"metadata":{},"sourceType":"module"}